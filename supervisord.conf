[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
loglevel=info

[program:nginx]
command=/usr/sbin/nginx -g 'daemon off;'
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=10

[program:landing]
command=/usr/local/bin/node /app/services/landing/server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=PORT="3000",NODE_ENV="production"

[program:dashboard]
command=/usr/local/bin/node /app/services/dashboard/dist/server.js
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=20
environment=PORT="5055",NODE_ENV="production"

# bot and rollup disabled for initial web-only Render deployment
# Re-enable after adding missing dependencies (@solana/web3.js, building trust-engines)
# [program:bot]
# command=/usr/local/bin/node /app/apps/discord-bot/dist/index.js
# ...
# [program:rollup]
# command=/usr/local/bin/node /app/services/trust-rollup/dist/index.js
# ...
